{"version":3,"sources":["components/filter.js","components/person_form.js","components/persons.js","services/personService.js","components/notification.js","app.js","index.js"],"names":["Filter","filter","handleFilterChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Person","person","onDelete","name","number","onClick","Persons","persons","mapPersons","p","key","length","toLowerCase","includes","map","baseUrl","axios","get","then","response","data","post","id","put","delete","Notification","message","className","App","messageTypes","useState","setPersons","setFilter","setNewName","setNewNumber","setMessage","messageType","setMessageType","useEffect","personService","initialPersons","updatePerson","find","newPerson","responsePerson","catch","err","error","setTimeout","event","target","preventDefault","personObject","some","window","confirm","concat","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.47ce857c.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => (\r\n    <div>\r\n      filter shown with\r\n      <input value={filter} onChange={handleFilterChange} />\r\n    </div>\r\n  );\r\n\r\n  export default Filter;","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addPerson,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange,\r\n}) => (\r\n  <form onSubmit={addPerson}>\r\n    <div>\r\n      name: <input value={newName} onChange={handleNameChange} />\r\n    </div>\r\n    <div>\r\n      number: <input value={newNumber} onChange={handleNumberChange} />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n);\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Person = ({ person, onDelete }) => (\r\n  <li>\r\n    {person.name} {person.number}\r\n    <button onClick={() => onDelete(person)}>delete</button>\r\n  </li>\r\n);\r\n\r\nconst Persons = ({ persons, filter, onDelete }) => {\r\n  const mapPersons = (p) => (\r\n    <Person key={p.name} person={p} onDelete={onDelete} />\r\n  );\r\n\r\n  if (filter.length > 0) {\r\n    return (\r\n      <ul>\r\n        {persons\r\n          .filter((p) => p.name.toLowerCase().includes(filter.toLowerCase()))\r\n          .map(mapPersons)}\r\n      </ul>\r\n    );\r\n  }\r\n  return <ul>{persons.map(mapPersons)}</ul>;\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => axios.get(baseUrl).then((response) => response.data);\r\n\r\nconst create = (person) =>\r\n  axios.post(baseUrl, person).then((response) => response.data);\r\n\r\nconst update = (id, person) =>\r\n  axios.put(`${baseUrl}/${id}`, person).then((response) => response.data);\r\n\r\nconst deletePerson = (id) => axios.delete(`${baseUrl}/${id}`);\r\n\r\nexport default { getAll, create, update, deletePerson };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, type }) => {\r\n  switch (type) {\r\n    case \"error\":\r\n      return <div className=\"error\">{message}</div>;\r\n    case \"success\":\r\n      return <div className=\"success\">{message}</div>;\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./components/filter\";\r\nimport PersonForm from \"./components/person_form\";\r\nimport Persons from \"./components/persons\";\r\nimport personService from \"./services/personService\";\r\nimport Notification from \"./components/notification\";\r\nimport \"./index.css\";\r\n\r\nconst App = () => {\r\n  const messageTypes = {\r\n    SUCCESS: \"success\",\r\n    ERROR: \"error\",\r\n  };\r\n\r\n  const [persons, setPersons] = useState([]);\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then((initialPersons) => {\r\n      setPersons(initialPersons);\r\n    });\r\n  }, []);\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n    if (!persons.some((p) => p.name === newName)) {\r\n      personService\r\n        .create(personObject)\r\n        .then((responsePerson) => {\r\n          setMessage(`Added ${newName}`);\r\n          setMessageType(messageTypes.SUCCESS);\r\n          setTimeout(() => {\r\n            setMessage(null);\r\n            setMessageType(null);\r\n          }, 5000);\r\n          setPersons(persons.concat(responsePerson));\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n        })\r\n        .catch((err) => {\r\n          setMessage(err.response.data.error);\r\n          setMessageType(messageTypes.ERROR);\r\n          setTimeout(() => {\r\n            setMessage(null);\r\n            setMessageType(null);\r\n          }, 8000);\r\n          console.log(err.response.data);\r\n        });\r\n    } else {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is already on the Phonebook, replace the old number with the new one?`\r\n        )\r\n      ) {\r\n        updatePerson(newName, newNumber);\r\n      }\r\n    }\r\n  };\r\n\r\n  const deletePerson = (person) => {\r\n    if (window.confirm(`Delete ${person.name}?`)) {\r\n      personService\r\n        .deletePerson(person.id)\r\n        .then(setPersons(persons.filter((p) => p.id !== person.id)));\r\n    }\r\n  };\r\n\r\n  const updatePerson = (name, newNumber) => {\r\n    const person = persons.find((p) => p.name === name);\r\n    const newPerson = { ...person, number: newNumber };\r\n    personService\r\n      .update(person.id, newPerson)\r\n      .then((responsePerson) =>\r\n        setPersons(\r\n          persons.map((p) => (p.id !== person.id ? p : responsePerson))\r\n        )\r\n      )\r\n      .catch((err) => {\r\n        setMessage(\r\n          err.response.data.error\r\n        );\r\n        setMessageType(messageTypes.ERROR);\r\n        setTimeout(() => {\r\n          setMessage(null);\r\n          setMessageType(null);\r\n        }, 8000);\r\n        //setPersons(persons.filter((p) => p.id !== person.id));\r\n      });\r\n  };\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <Notification message={message} type={messageType} />\r\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons persons={persons} filter={filter} onDelete={deletePerson} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./app\";\n\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}